<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>为什么要升级Vue3 | Mr. Zhang&#39;s Blog</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/my-bloglogo.png">
    <meta name="description" content="专注 Node.js 技术栈分享，从前端到Node.js再到数据库">
    
    <link rel="preload" href="/my-blog/assets/css/0.styles.acfffbb5.css" as="style"><link rel="preload" href="/my-blog/assets/js/app.af9a026c.js" as="script"><link rel="preload" href="/my-blog/assets/js/2.1f15f8f6.js" as="script"><link rel="preload" href="/my-blog/assets/js/16.437f0410.js" as="script"><link rel="prefetch" href="/my-blog/assets/js/10.e70d64e8.js"><link rel="prefetch" href="/my-blog/assets/js/11.6e0b7ff2.js"><link rel="prefetch" href="/my-blog/assets/js/12.9c0279be.js"><link rel="prefetch" href="/my-blog/assets/js/13.4a02f44b.js"><link rel="prefetch" href="/my-blog/assets/js/14.4ca11e8c.js"><link rel="prefetch" href="/my-blog/assets/js/15.7da2212c.js"><link rel="prefetch" href="/my-blog/assets/js/17.5835b2f3.js"><link rel="prefetch" href="/my-blog/assets/js/3.301dd809.js"><link rel="prefetch" href="/my-blog/assets/js/4.f748970b.js"><link rel="prefetch" href="/my-blog/assets/js/5.4ea63480.js"><link rel="prefetch" href="/my-blog/assets/js/6.2721a543.js"><link rel="prefetch" href="/my-blog/assets/js/7.e3689d62.js"><link rel="prefetch" href="/my-blog/assets/js/8.be26c923.js"><link rel="prefetch" href="/my-blog/assets/js/9.0b5a2aed.js">
    <link rel="stylesheet" href="/my-blog/assets/css/0.styles.acfffbb5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/my-blog/" class="home-link router-link-active"><!----> <span class="site-name">Mr. Zhang's Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/my-blog/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/my-blog/web/html/" class="nav-link">
  Html
</a></li><li class="dropdown-item"><!----> <a href="/my-blog/web/css/" class="nav-link">
  Css
</a></li><li class="dropdown-item"><!----> <a href="/my-blog/web/javascript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/my-blog/web/vue/" class="nav-link router-link-active">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/my-blog/web/react/" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/my-blog/web/git/" class="nav-link">
  Git
</a></li></ul></div></div><div class="nav-item"><a href="/my-blog/node/" class="nav-link">
  Node
</a></div><div class="nav-item"><a href="/my-blog/database/" class="nav-link">
  数据库
</a></div><div class="nav-item"><a href="/my-blog/interview/" class="nav-link">
  面试问题
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/my-blog/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/my-blog/web/html/" class="nav-link">
  Html
</a></li><li class="dropdown-item"><!----> <a href="/my-blog/web/css/" class="nav-link">
  Css
</a></li><li class="dropdown-item"><!----> <a href="/my-blog/web/javascript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/my-blog/web/vue/" class="nav-link router-link-active">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/my-blog/web/react/" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/my-blog/web/git/" class="nav-link">
  Git
</a></li></ul></div></div><div class="nav-item"><a href="/my-blog/node/" class="nav-link">
  Node
</a></div><div class="nav-item"><a href="/my-blog/database/" class="nav-link">
  数据库
</a></div><div class="nav-item"><a href="/my-blog/interview/" class="nav-link">
  面试问题
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Vue 学习</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/my-blog/web/vue/vue3.0.html" aria-current="page" class="active sidebar-link">初识vue3.0</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/my-blog/web/vue/vue3.0.html#为什么要升级vue3" class="sidebar-link">为什么要升级Vue3</a></li><li class="sidebar-sub-header"><a href="/my-blog/web/vue/vue3.0.html#async-await" class="sidebar-link">Async/Await</a></li><li class="sidebar-sub-header"><a href="/my-blog/web/vue/vue3.0.html#生命周期的变化" class="sidebar-link">生命周期的变化</a></li><li class="sidebar-sub-header"><a href="/my-blog/web/vue/vue3.0.html#认识composition-api" class="sidebar-link">认识Composition API</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/my-blog/web/vue/vue3.0.html#reactive-ref-torefs-watch-watcheffecf-computed-生命周期" class="sidebar-link">reactive  ref  toRefs  watch   watchEffecf computed    生命周期</a></li></ul></li></ul></li><li><a href="/my-blog/web/vue/test2.html" class="sidebar-link">测试02</a></li><li><a href="/my-blog/web/vue/test3.html" class="sidebar-link">测试03</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="为什么要升级vue3"><a href="#为什么要升级vue3" class="header-anchor">#</a> 为什么要升级Vue3</h2> <p>Vue2.x中所有数据都定义在data中，方法定义在methods中，并且使用this来调用对应的数据和方法。</p> <h2 id="async-await"><a href="#async-await" class="header-anchor">#</a> Async/Await</h2> <p>是Javascript编写异步程序的新方法。以往的异步方法无外呼回调函数和Promise,但是async、await建立于Promise之上。</p> <h5 id="简介"><a href="#简介" class="header-anchor">#</a> 简介：</h5> <ul><li>是异步代码的新方式、基于Promise实现</li> <li>使得异步代码更像同步代码；只能在async函数中使用，不能在普通函数中使用</li> <li>关键字后面必须跟Promise对象</li> <li>函数执行到await后，Promist函数执行完毕，但Primise内部一般都是异步函数，所以时间循环会一直await,直到事件轮询检查到Promise有了状态resolve或reiect才重新执行这个函数后面的内容</li></ul> <h5 id="用法"><a href="#用法" class="header-anchor">#</a> 用法：</h5> <ul><li><p>async函数返回一耳光Promise对象，可以使用then方法添加回调函数。当函数执行的时候，一旦遇到await就先返回一个Promise对象，等到异步操作完成，在接着执行函数体内后面的语句。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">timeout</span><span class="token punctuation">(</span><span class="token parameter">ms</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> ms<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">asyncPrint</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> ms</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token function">timeout</span><span class="token punctuation">(</span>ms<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">asyncPrint</span><span class="token punctuation">(</span><span class="token string">'hello world'</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">let</span> promise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
		<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;done&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token keyword">await</span> promise<span class="token punctuation">;</span>  <span class="token comment">//等待，直到promise resolve（*）</span>
	<span class="token function">alert</span><span class="token punctuation">(</span>resllt<span class="token punctuation">)</span>  <span class="token comment">//&quot;done&quot;</span>
<span class="token punctuation">}</span>
<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="生命周期的变化"><a href="#生命周期的变化" class="header-anchor">#</a> 生命周期的变化</h2> <p>Vue2     ---&gt;    Vue3</p> <p>beforeCreate     -- 	setup</p> <p>created			   --	 setup</p> <p>beforeMount	--	  onBeforeMount</p> <p>mounted		-- 		onMounted</p> <p>beforeUpdate     --    onBeforeUpdate</p> <h2 id="认识composition-api"><a href="#认识composition-api" class="header-anchor">#</a> 认识Composition API</h2> <h3 id="reactive-ref-torefs-watch-watcheffecf-computed-生命周期"><a href="#reactive-ref-torefs-watch-watcheffecf-computed-生命周期" class="header-anchor">#</a> reactive  ref  toRefs  watch   watchEffecf computed    生命周期</h3> <h4 id="_1-setup"><a href="#_1-setup" class="header-anchor">#</a> 1：setup</h4> <h5 id="setop执行是在-beforecreate和created之前执行-执行时尚未创建组件实例-在这里没有this"><a href="#setop执行是在-beforecreate和created之前执行-执行时尚未创建组件实例-在这里没有this" class="header-anchor">#</a> setop执行是在 beforeCreate和created之前执行，执行时尚未创建组件实例，在这里没有this</h5> <h5 id="使用setop时-接收2个参数"><a href="#使用setop时-接收2个参数" class="header-anchor">#</a> 使用setop时，接收2个参数：</h5> <p>​		**props：**组件传入的属性</p> <p>​		**context：**提供了this中常用的三个属性【attrs属性、slo插槽t、emit事件】--【每次自动同步最新的值】</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">pi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>aaa<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>
export default defineComponent({
	setup(props,context){
		consolo.loe(props.p1) //aaa
	}
})
</code></pre></div><p>setop中接收的props是响应式的，当传入新的props时，会被及时更新。由于是响应式的，所以不能使用ES6解构，结构会消除它的响应式。</p> <p>在开发中，想要使用【解构，还能保持props的响应式】可以使用toRefs</p> <h4 id="_2-reactive、ref和torefs"><a href="#_2-reactive、ref和torefs" class="header-anchor">#</a> 2：reactive、ref和toRefs</h4> <p><strong>在vue2.x中，定义数据都是在data中，但是vue3.x可以使用recative和ref来进行定义</strong></p> <h5 id="ref用法"><a href="#ref用法" class="header-anchor">#</a> ref用法：</h5> <div class="language-vue extra-class"><pre class="language-vue"><code>setup(){
	const obj=ref({count:1,name:'张三'})
	setTimeout(()=&gt;{
		obj.value.count = obj.value.count +1
		obj.value.name = '李四'
	},1000)
	return{
		obj
	}
}
//将obj.conunt和obj.name绑定到页面上；但是reactive函数确实可以代理一个对象，但是不能代理基本类型，例如：字符串、数字、boolean等
</code></pre></div><h5 id="ref、reactives用法"><a href="#ref、reactives用法" class="header-anchor">#</a> ref、reactives用法：</h5> <p>reactives作用于一个对象，返回这个对象的一个响应式副本。通过这个新的函数我们可以任意给数据增加响应式的特性。而且这个特性不会应为参数传递而消失。</p> <p>reactives()  函数接收一个普通对象，返回一个响应式的数据对象。</p> <p>ref()  函数用来根据给定的值创建一个响应式的数据对象，ref() 函数调用的返回值是一个对象，这个对象上只包含一个value属性。</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span> 第{{year}}年 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span> 姓名：{{uesr.name}} <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span> 年龄：{{uesr.age}} <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span> 性别：{{uesr.gender}} <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">import</span> <span class="token punctuation">{</span>defineComponent<span class="token punctuation">,</span>reactive<span class="token punctuation">,</span>ref<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
	<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token function">setop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">const</span> year <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
			<span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token operator">:</span><span class="token string">'小明'</span><span class="token punctuation">,</span>age<span class="token operator">:</span><span class="token number">26</span><span class="token punctuation">,</span>gender<span class="token operator">:</span><span class="token string">'男'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
			<span class="token function">setInteravl</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
				year<span class="token punctuation">.</span>value <span class="token operator">++</span>
				year<span class="token punctuation">.</span>age <span class="token operator">++</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span>
			<span class="token keyword">return</span><span class="token punctuation">{</span>
				year<span class="token punctuation">,</span>
				user
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>使用user.name，user.age这样写很繁琐，不能直接解构，会消除响应式。</p> <h5 id="torefs解决以上问题"><a href="#torefs解决以上问题" class="header-anchor">#</a> toRefs解决以上问题：</h5> <div class="language-vue extra-class"><pre class="language-vue"><code>return{
	year,
	...toRefs(user)  //解构对象数据
}
</code></pre></div><h5 id="isref的用法"><a href="#isref的用法" class="header-anchor">#</a> isRef的用法：</h5> <p>isRef()  用来判断某个值是否为ref（）创建出来的对象；</p> <p>应用场景：当需要展开某个可能未ref（）创建出来的值得时候</p> <div class="language-vue extra-class"><pre class="language-vue"><code>import {ref,isRef} from 'vue'
setup(){
	const foo = ref(0)
	const ifFoo = isRef(foo) ? foo.value : foo
	console.log(isFoo) //0
}
</code></pre></div><h4 id="_3-watch与watcheffect的用法"><a href="#_3-watch与watcheffect的用法" class="header-anchor">#</a> 3：watch与watchEffect的用法</h4> <p><strong>watch函数是用来侦听特定的数据源，并在回调函数中执行副作用。默认情况下是惰性的，也就是说仅在侦听的数据源变更时才执行回调。</strong></p> <h5 id="_3-1-watch-source-callback-options-接收三个参数"><a href="#_3-1-watch-source-callback-options-接收三个参数" class="header-anchor">#</a> 3.1：watch( source, callback, [options])   //接收三个参数</h5> <p>参数说明：</p> <ul><li>source：可以支持String，Object，Function，Array用于指定要侦听的响应式变量</li> <li>callback：执行的回调函数</li> <li>options：支持deep，immediate和flush选项</li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code>import {defineComponent,fef,reactive,toRefs,watch} from 'vue'
export default defineComponent({
	setup(){
		const state = reactive ({name:'小王',age:20})
		setTimeout(()=&gt;{
			state.age ++
		},1000)
		//修改age值时会触发，watch的回调
		watch(()=&gt;state.age,(curAge,preAge)=&gt;{
			console.log(&quot;新值:&quot;, curAge, &quot;老值:&quot;, preAge)
		})
		return{
			...toRefs(state)
		}
	}
})
</code></pre></div><h6 id="_1-侦听ref定义的数据"><a href="#_1-侦听ref定义的数据" class="header-anchor">#</a> 1：侦听ref定义的数据</h6> <div class="language-vue extra-class"><pre class="language-vue"><code>const year =ref(0)
setTimeout(()=&gt;{
	year.value ++
},1000)
watch(year,(newVal,oldVal)=&gt;{
	console.log(&quot;新值:&quot;, newVal, &quot;老值:&quot;, oldVal);
})
</code></pre></div><h6 id="_2-侦听多个数据"><a href="#_2-侦听多个数据" class="header-anchor">#</a> 2：侦听多个数据</h6> <div class="language-vue extra-class"><pre class="language-vue"><code>watch([()=&gt;state.age,year],([curAge,preAge],[newVal,oldVal])=&gt;{
	console.log(&quot;新值:&quot;, curAge, &quot;老值:&quot;, preAge);
    console.log(&quot;新值:&quot;, newVal, &quot;老值:&quot;, oldVal);
})
</code></pre></div><h6 id="_3-侦听复杂的嵌套对象"><a href="#_3-侦听复杂的嵌套对象" class="header-anchor">#</a> 3：侦听复杂的嵌套对象</h6> <div class="language-vue extra-class"><pre class="language-vue"><code>const state = reactive({
	room:{
		id:100,
		attrs:{
			size:'140平米'，
			type：'三室两厅'
		}
	}
})
watch(()=&gt;state.room,(newType,oldType)=&gt;{
	console.log(&quot;新值:&quot;,newType,&quot;老值:&quot;,oldType)
},{deep:true})
//如果第三个参数不使用deep:true；是无法监听到数据变化的
</code></pre></div><h5 id="_3-2-watcheffect"><a href="#_3-2-watcheffect" class="header-anchor">#</a> 3.2：watchEffect</h5> <div class="language-vue extra-class"><pre class="language-vue"><code>import {defineComponent,ref,reactive,toRefs,watchEffecf} from 'vue'
export default defineComponent({
	setup(){
		const state = reactive({name:'小李'，age:22})
		let year = ref(0)
		setInterval(()=&gt;{
			state.age ++
			year.value ++
		},1000)
		watchEffect(()=&gt;{
			console.log(state)
			console.log(year)
		})
		return{
			...toRefs(state)
		}
	}
})
//watchEffect会自动收集依赖，只要指定一个回调函数。在组件初始化时，会先执行一次来收集依赖，然后当收集到的依赖发生变化时，就会再次执行回调函数。
 - watchEffect 不需要手动传入依赖
 - 会先执行一次来自动收集依赖
 - 无法获取到变化前的值，只能获取变化后的值
</code></pre></div><h4 id="_4-computed"><a href="#_4-computed" class="header-anchor">#</a> 4：computed</h4> <h5 id="_1-创建只读属性"><a href="#_1-创建只读属性" class="header-anchor">#</a> 1：创建只读属性</h5> <div class="language-vue extra-class"><pre class="language-vue"><code>import { computed,ref }from 'vue'
setup(){
	//创建一个ref响应式数据
	const count ref(1)
	//根据count的值，创建一个响应式的计算属性plusOne
	//它会根据依赖的ref自动计算并返回一个新的ref
	const plusOne = computed(()=&gt;count.value +1)
	console.log(plusOne.value)  //输出2
	return {count,plusone}
}
</code></pre></div><h5 id="_2-创建可读可写的计算属性"><a href="#_2-创建可读可写的计算属性" class="header-anchor">#</a> 2：创建可读可写的计算属性</h5> <div class="language-vue extra-class"><pre class="language-vue"><code>const count2 = ref(1)
//创建一个computed 计算属性
const plusTwo = computed({
	//取值函数
	get:() =&gt;count2.value +1
	//赋值函数
	set:() =&gt;{
		count.value = value -1
	}
})
//为计算属性赋值操作，会触发set函数
plusTwo.value =9
//触发set 函数后，count 的值会被更新
console.log(count2.value)  //输出8
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/my-blog/web/vue/test2.html">
        测试02
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/my-blog/assets/js/app.af9a026c.js" defer></script><script src="/my-blog/assets/js/2.1f15f8f6.js" defer></script><script src="/my-blog/assets/js/16.437f0410.js" defer></script>
  </body>
</html>
